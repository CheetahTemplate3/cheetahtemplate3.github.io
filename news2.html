<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &#8212; Cheetah3 - The Python-Powered Template Engine</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.0.0b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cheetah3 - The Python-Powered Template Engine</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/news2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <dl class="docutils">
<dt>2.4.2 (February 8th, 2010)</dt>
<dd><ul class="first last simple">
<li>Fix issue where subclasses of Template failed to pick up attributes in the
searchlist</li>
<li>Remove old/outdated bundled memcached python client</li>
<li>Allow for #encoding directives to exist after a comment (i.e. not the first
line in a module)</li>
<li>Remove support for WebWare servlets (which caused significant performance
slowdowns on Mac OS X)</li>
<li>Old/stale code pruned in preparation for Python 3 support</li>
</ul>
</dd>
<dt>2.4.1 (December 19th, 2009)</dt>
<dd><ul class="first last simple">
<li>&#8211;quiet flag added to <cite>cheetah</cite> to silence printing to stdout (abbeyj)</li>
<li>Refactoring to minimize the amount of forked code for Python3 (rtyler)</li>
<li>Template.compile() will no longer create class names with numerous leading
underscores (rtyler; reported by Kirill Uhanov)</li>
<li>DirectiveAnalyzer (cheetah-analyze script) added to report directive usage in templates (rtyler)</li>
<li>Older LaTeX docs converted to rst for Sphinx (rtyler)</li>
<li>Prevent #raw blocks from evaluating $-placeholders and escaped strings (karmix0)</li>
<li>New tests added to verify PSP behavior and other untested internals (rtyler)</li>
</ul>
</dd>
<dt>2.4.0 (October 24th, 2009)</dt>
<dd><ul class="first last simple">
<li>Fix a major performance regression in Template.__init__()</li>
<li>More graceful handling of unicode when calling .respond() to render a template</li>
<li>Minor code updates</li>
<li>Update the default filter (thanks mikeb!)</li>
</ul>
</dd>
<dt>2.3.0 (October 24th, 2009) (loosely equivalent to 2.4.0)</dt>
<dd><ul class="first last simple">
<li>Fix a major performance regression in Template.__init__()</li>
<li>More graceful handling of unicode when calling .respond() to render a template</li>
<li>Minor code updates</li>
<li>Update the default filter (thanks mikeb!)</li>
</ul>
</dd>
<dt>2.2.2 (September 10th, 2009)</dt>
<dd><ul class="first last simple">
<li>Prevent _namemapper.c from segfaulting when PyImport_ImportModule fails for some reason (Bogdano Arendartchuk &lt;<a class="reference external" href="mailto:debogdano&#37;&#52;&#48;gmail&#46;com">debogdano<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;)</li>
<li>Removal of the contrib/markdown module (in favor of a setuptools dependency)</li>
<li>Default setup.py to use setuptools by default, failing that, fall back to distutils</li>
<li>Improvements to setup.py to support building for Windows (thanks abbeyj!)</li>
<li>Improvements to C-based NameMapper for Windows</li>
<li>Fixes for a swath of unit tests on Windows</li>
<li>Re-enabling the EOL tests (whoops)</li>
<li>Fix for unicode/utf-8 dynamic compilation error (thanks mikeb!) (Test.Unicode.JBQ_UTF8_Test8)</li>
<li>0000010: [Templates] Failure to execute templates on Google App Engine (rtyler)</li>
<li>0000026: [Compiler] Support multiple inheritance (rtyler)</li>
</ul>
</dd>
<dt>2.2.1 (June 1st, 2009)</dt>
<dd><ul class="first last simple">
<li>0000020: [Templates] Builtin support for using Cheetah with Django (rtyler)</li>
<li>0000021: [Compiler] &#64;static and &#64;classmethod don&#8217;t properly define the _filter local (rtyler)</li>
<li>0000023: [Compiler] Update Template super calls to use super() (rtyler)</li>
<li>Update all references to communitycheetah.org to point back at cheetahtemplate.org</li>
</ul>
</dd>
<dt>2.2.0 (May 17th, 2009)</dt>
<dd><ul class="first last simple">
<li>Switch all internal representations of template code to unicode objects instead of str() objects</li>
<li>Convert unicode compiled template to an utf8 char buffer when writing to a file (Jean-Baptiste Quenot &lt;<a class="reference external" href="mailto:jbq&#37;&#52;&#48;caraldi&#46;com">jbq<span>&#64;</span>caraldi<span>&#46;</span>com</a>&gt;)</li>
<li>0000011: [Templates] Calling a function with arguments calls the function with None (rtyler)</li>
<li>0000015: [Tests] Resolve test failures in &#8216;next&#8217; branch (rtyler)</li>
<li>0000019: [Templates] Properly warn when joining unicode and non-unicode objects in DummyTransaction (rtyler)</li>
</ul>
</dd>
<dt>2.1.2 (May 5, 2009)</dt>
<dd><ul class="first last simple">
<li>0000006: [Templates] Support &#64;staticmethod and &#64;classmethod (rtyler)</li>
</ul>
</dd>
<dt>2.1.1 (April 16, 2009)</dt>
<dd><ul class="first last simple">
<li>Support __eq__() and __ne__() the way you might expect in src/Tools/RecursiveNull (patch suggested by Peter Warasin &lt;<a class="reference external" href="mailto:peter&#37;&#52;&#48;endian&#46;com">peter<span>&#64;</span>endian<span>&#46;</span>com</a>&gt;)</li>
<li>Applied patch to avoid hitting the filesystem to get the file modification time everytime a #include directive is processed (Jean-Baptiste Quenot &lt;<a class="reference external" href="mailto:jbq&#37;&#52;&#48;caraldi&#46;com">jbq<span>&#64;</span>caraldi<span>&#46;</span>com</a>&gt;)</li>
<li>Applied patch to fix some annoying cases when Cheetah writes to stderr instead of propagating the exception (Jean-Baptiste Quenot &lt;<a class="reference external" href="mailto:jbq&#37;&#52;&#48;caraldi&#46;com">jbq<span>&#64;</span>caraldi<span>&#46;</span>com</a>&gt;)</li>
<li>Added KDE editor support</li>
<li>Applied patch to correct importHook behavior on Python 2.6 (reported/patched by Toshio Ernie Kuratomi &lt;<a class="reference external" href="mailto:a&#46;badger&#37;&#52;&#48;gmail&#46;com">a<span>&#46;</span>badger<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;)</li>
<li>Correct unicode issue when calling/embedding unicode templates inside of other templtes (testcase Tests.Unicode.JPQ_UTF8_Test3. reported by Jean-Baptiste Quenot &lt;<a class="reference external" href="mailto:jbq&#37;&#52;&#48;caraldi&#46;com">jbq<span>&#64;</span>caraldi<span>&#46;</span>com</a>&gt;)</li>
<li>Added &#8211;shbang option (e.g. &#8220;cheetah compile &#8211;shbang &#8216;#!/usr/bin/python2.6&#8217; &#8221;)</li>
<li>Removed dependency on optik OptionParser in favor of builtin Python optparse module</li>
<li>Introduction of the #transform directive for whole-document filtering</li>
<li>Introduction of Cheetah.contrib.markdown and Cheetah.Filters.Markdown for outputting a markdown processed template (meant for #transform)</li>
<li>Cheetah.Filters.CodeHighlighter, pygments-based code highlighting filter for use with #transform</li>
<li>Addition of &#8220;useLegacyImportMode&#8221; compiler setting (defaulted to True) to allow for older (read: broken) import behavior</li>
</ul>
</dd>
<dt>2.1.0.1 (March 27, 2009)</dt>
<dd><ul class="first last simple">
<li>Fix inline import issue introduced in v2.1.0</li>
</ul>
</dd>
<dt>2.1.0 (March 16, 2009)</dt>
<dd><ul class="first last simple">
<li>Quiet DeprecationWarnings being printed to stderr when using Cheetah on Python 2.6 and up. Patch suggested by Satoru SATOH &lt;<a class="reference external" href="mailto:satoru&#46;satoh&#37;&#52;&#48;gmail&#46;com">satoru<span>&#46;</span>satoh<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</li>
<li>Apply patch to support parallel compilation of templates courtesy of Evan Klitzke &lt;<a class="reference external" href="mailto:evan&#37;&#52;&#48;eklitzke&#46;org">evan<span>&#64;</span>eklitzke<span>&#46;</span>org</a>&gt;</li>
<li>Corrected issue when __getattr__ calls on searchList objects raise exceptions (<a class="reference external" href="mailto:tyler&#37;&#52;&#48;slide&#46;com">tyler<span>&#64;</span>slide<span>&#46;</span>com</a>)</li>
<li>make autocalling in valueForName correctly ignore newstyle classes and instances
that are callable, as it does for oldstyle classes and instances.  Patch
from <a class="reference external" href="mailto:lucas&#37;&#52;&#48;endian&#46;com">lucas<span>&#64;</span>endian<span>&#46;</span>com</a>
[TR]</li>
<li>made it possible to chain multiple decorators to a method #def [TR with
patch from Graham Dennis]</li>
<li>fixed a bug in _eatMultiLineDef that Graham Dennis reported. [TR]</li>
<li>fixed &#8216;module.__init__() argument 1 must be string, not unicode&#8217; bug in
Template.py reported by Erwin Ambrosch [TR]</li>
</ul>
</dd>
<dt>2.0.1 (Nov 16, 2007)</dt>
<dd><ul class="first last simple">
<li>fixed a deadlock Christoph Zwerschke found in Cheetah.ImportHooks.
[TR]</li>
</ul>
</dd>
<dt>2.0 (Oct 12, 2007)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!</p>
<ul class="simple">
<li>fixed exception handling issue in the C implemenation of NameMapper
[patch from Eric Huss]</li>
<li>fixed filtering of #included subtemplates
[patch from Brian Bird]</li>
</ul>
<p class="last">See the release notes from 2.0b1-5 and 2.0rc1-8 for other changes since
Cheetah 1.0.</p>
</dd>
<dt>2.0rc8 (April 11, 2007)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote class="last">
<div><ul>
<li><p class="first">added a &#8216;#unicode &lt;encoding&gt;&#8217; directive to indicate that the output of the
template should be a unicode string even if the template source is a
normal byte string.</p>
<blockquote>
<div><ul>
<li><p class="first">#unicode and #encoding are mutually exclusive.  Use one or the other.</p>
</li>
<li><p class="first">#unicode must be on a line by itself.</p>
</li>
<li><p class="first">Strings in embedded code must be explictly marked as unicode if they
contain non-ascii chars:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#unicode latin-1
\$f(u&quot;&lt;some non-ascii char&gt;&quot;) ## right
\$f(&quot;&lt;some non-ascii char&gt;&quot;) ## wrong
</pre></div>
</div>
<p>However, this works fine:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#unicode latin-1</span>
<span class="n">blah</span> <span class="n">blah</span> <span class="o">&lt;</span><span class="n">some</span> <span class="n">non</span><span class="o">-</span><span class="n">ascii</span> <span class="n">char</span><span class="o">&gt;</span> <span class="n">blah</span> <span class="n">blah</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">fixed several unicode bugs in the compiler.</p>
</li>
<li><p class="first">fixed some unicode issues in the standard filters.</p>
</li>
<li><p class="first">fixed a few minor bugs in code that never gets called.  Thanks to
Alejandro Dubrovsky for pointing them out.</p>
</li>
<li><p class="first">make RawOrEncodedUnicode the baseclass of all filters and remove some
unused/redudant filters</p>
</li>
<li><p class="first">added new compiler setting &#8216;addTimestampsToCompilerOutput&#8217;. See Brian
Bird&#8217;s post about it.  He stores his cheetah generated .py files in
subversion and needed to disable the timestamp code so svn wouldn&#8217;t care
when he recompiles those .py modules.</p>
</li>
<li><p class="first">added the #super directive, which calls the method from the parent class
which has the same as the current #def or #block method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#def foo</span>
    <span class="o">...</span> <span class="n">child</span> <span class="n">output</span>
    <span class="c1">#super  ## includes output of super(&lt;CurrentClass&gt;, self).foo()</span>
    <span class="o">...</span> <span class="n">child</span> <span class="n">output</span>
<span class="c1">#end def</span>

<span class="c1">#def bar(arg)</span>
    <span class="o">...</span> <span class="n">child</span> <span class="n">output</span>
    <span class="c1">#super(arg)  ## includes output of super(&lt;CurrentClass&gt;, self).bar(arg)</span>
     <span class="o">...</span> <span class="n">child</span> <span class="n">output</span>
<span class="c1">#end def</span>
</pre></div>
</div>
</li>
<li><p class="first">added some unit tests for the new directives</p>
</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0rc7 (July 4, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul>
<li><p class="first">extended the #implements directive so an arguments list can be declared in
the same fashion as #def and #block.</p>
</li>
<li><p class="first">made the parser raise ParseError when $*placeholder, $*5*placeholder,
$(placeholder), etc. are found within expressions.  They are only valid in
top-level text.</p>
</li>
<li><p class="first">tweaked the parser so it&#8217;s possible to place a comment on the same line as
a directive without needing to explicitly close the directive first. This
works regardless of whether or not you added a colon:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="s2">&quot;#if 1:</span><span class="se">\\</span><span class="s2">n\$aStr</span><span class="se">\\</span><span class="s2">n#end if</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;blarg</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="s2">&quot;#if 1:   </span><span class="se">\\</span><span class="s2">n\$aStr</span><span class="se">\\</span><span class="s2">n#end if</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;blarg</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="s2">&quot;#if 1: ##comment </span><span class="se">\\</span><span class="s2">n\$aStr</span><span class="se">\\</span><span class="s2">n#end if</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;blarg</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="s2">&quot;#if 1 ##comment </span><span class="se">\\</span><span class="s2">n\$aStr</span><span class="se">\\</span><span class="s2">n#end if</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;blarg</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Previously, that last test would have required an extra # to close the #if
directive before the comment directive started:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="s2">&quot;#if 1 ###comment </span><span class="se">\\</span><span class="s2">n\$aStr</span><span class="se">\\</span><span class="s2">n#end if</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">,</span>
            <span class="s2">&quot;blarg</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Code that makes use of explicit directive close tokens immediately followed by
another directive will still work as expected:
#if test##for i in range(10)# foo $i#end for##end if</p>
</li>
<li><p class="first">safer handling of the baseclass arg to Template.compile().  It now does
the right thing if the user passes in an instance rather than a class.</p>
</li>
</ul>
</div></blockquote>
<p>ImportHooks: [TR]</p>
<blockquote>
<div><ul>
<li><p class="first">made it possible to specify a list of template filename extentions that are
looped through while searching for template modules. E.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">Cheetah.ImportHooks</span>
<span class="n">Cheetah</span><span class="o">.</span><span class="n">ImportHooks</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">templateFileExtensions</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.tmpl&#39;</span><span class="p">,</span><span class="s1">&#39;.cheetah&#39;</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Core changes by MO:</p>
<blockquote class="last">
<div><ul class="simple">
<li>Filters are now new-style classes.</li>
<li>WebSafe and the other optional filters in Filters.py now use
RawOrEncodedUnicode instead of Filter as a base class.  This allows them
to work with Unicode values containing non-ASCII characters.</li>
<li>User-written custom filters should inherit from RawOrEncodedUnicode
and call the superclass .filter() instead of str(). str() as of
Python 2.4.2 still converts Unicode to string using ASCII codec,
which raises UnicodeEncodeError if it contains non-ASCII characters.</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0rc6 (Feb 4, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote class="last">
<div><ul>
<li><p class="first">added a Cheetah version dependency check that raises an assertion if a
template was compiled with a previous version of Cheetah whose templates
must be recompiled.</p>
</li>
<li><p class="first">made the Cheetah compilation metadata accessible via class attributes in
addition to module globals</p>
</li>
<li><p class="first">major improvement to exception reporting in cases where bad Python syntax
slips past the Cheetah parser:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>File &quot;/usr/lib/python2.4/site-packages/Cheetah/Template.py&quot;, line 792, in compile
     raise parseError
 Cheetah.Parser.ParseError:

 Error in the Python code which Cheetah generated for this template:
 ================================================================================

 invalid syntax (DynamicallyCompiledCheetahTemplate.py, line 86)

 Line|Python Code
 ----|-------------------------------------------------------------
 84  |
 85  |        write(&#39;\\n\\n&#39;)
 86  |        for i an range(10): # generated from line 4, col 1
                     ^
 87  |            _v = i # &#39;\$i&#39; on line 5, col 3
 88  |            if _v is not None: write(_filter(_v, rawExpr=&#39;\$i&#39;)) # from line 5, col 3.
 89  |            write(&#39;\\n&#39;)

 ================================================================================

 Here is the corresponding Cheetah code:

 Line 4, column 1

 Line|Cheetah Code
 ----|-------------------------------------------------------------
 2   |#compiler useNameMapper=False
 3   |
 4   |#for i an range(10)
      ^
 5   |  \$i
 6   |#end for
 7   |
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0rc5 (Feb 3, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul class="simple">
<li>fixed a memory leak in Template.compile(), reported by Andrea Arcangeli</li>
<li>simplified concurrency locking and compile caching in Template.compile()</li>
</ul>
</div></blockquote>
<p>The command line tool (CheetahWrapper.py):</p>
<blockquote class="last">
<div><ul class="simple">
<li>added new option &#8211;settings for supplying compiler settings</li>
<li>added new option &#8211;templateAPIClass to replace the environment var
CHEETAH_TEMPLATE_CLASS lookup I added in 2.0b1</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0rc4 (Jan 31, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote class="last">
<div><ul class="simple">
<li>fixed a typo-bug in the compile hashing code in Template.compile()</li>
<li>improved the macros framework and made it possible to implement macros in
Python code so they can be shared between templates</li>
<li>more work on the #i18n directive.  It&#8217;s now a macro directive.</li>
<li>added new Cheetah.Macros package</li>
<li>more tests</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0rc3 (Jan 29, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul>
<li><p class="first">added short-form single line versions of all directives that have an #end
tag, except for #errorCatcher:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#if, #else, #elif, #unless,</span>
<span class="c1">#for, #while, #repeat,</span>
<span class="c1">#try, #except, #finally,</span>
<span class="c1">#cache, #raw</span>
<span class="c1">#call, #capture</span>
</pre></div>
</div>
<p>The #def and #block directives already had single-line versions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#if cond: foo</span>
<span class="c1">#elif cond2: bar</span>
<span class="c1">#else: blarg</span>

<span class="c1">#for i, val in enumerate(vals): \$i-\$val</span>
</pre></div>
</div>
<p>Note that if you accidentally leave a colon at the end of one of these
directives but nothing else follows it, aside from whitespace, the parser
will treat it as a normal multi-line directive.</p>
<p>The first leading space after the colon is discarded. Any additional
spaces will be included in the output.</p>
<p>Also note, if you use the short form versions of #if/#else/#elif you must
it for all three.  The following is not valid:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#if cond: foo</span>
<span class="c1">#elif cond2</span>
   <span class="n">bar</span>
<span class="c1">#else: blarg</span>
</pre></div>
</div>
</li>
<li><p class="first">added support for $!silentModePlaceholders. This is the same as quiet
mode in Velocity: <a class="reference external" href="http://jakarta.apache.org/velocity/docs/user-guide.html#Quiet%20Reference%20Notation">http://jakarta.apache.org/velocity/docs/user-guide.html#Quiet%20Reference%20Notation</a></p>
</li>
<li><p class="first">added support for function/method &#64;decorators.  It also works with blocks.
As in vanilla Python, the &#64;decorator statement must be followed with a
function/method definition (i.e. #def or #block):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#from xxx import aDecorator</span>
<span class="o">...</span>
<span class="o">...</span>
<span class="c1">#@aDecorator</span>
<span class="c1">#def func</span>
  <span class="n">foo</span>
<span class="c1">#end def</span>

<span class="c1">#@aDecorator</span>
<span class="c1">#def singleLineShortFormfunc: foo</span>

<span class="c1">#@aDecorator</span>
<span class="c1">#block func2</span>
  <span class="n">bar</span>
<span class="c1">#end block</span>
</pre></div>
</div>
</li>
<li><p class="first">added a new callback hook &#8216;handlerForExtendsDirective&#8217; to the compiler settings. It
can be used to customize the handling of #extends directives.  The
callback can dynamically add import statements or rewrite the baseclass&#8217;
name if needed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">baseClassName</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">compiler</span><span class="p">,</span> <span class="n">baseClassName</span><span class="p">)</span>
</pre></div>
</div>
<p>See the discussion on the mailing list on Jan 25th for more details.</p>
</li>
<li><p class="first">changed the default filter to the one that doesn&#8217;t try to encode Unicode
It was &#8216;EncodeUnicode&#8217; and is now &#8216;RawOrEncodedUnicode&#8217;.</p>
</li>
<li><p class="first">added optional support for parsing whitespace between the directive start
token (#) and directive names, per Christophe Eymard&#8217;s request.  For the
argument behind this see the mailing list archives for Jan 29th.  This is
off by default.  You must turn it on using the compiler setting
allowWhitespaceAfterDirectiveStartToken=True:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#for \$something in \$another
#  for \$somethin2 in \$another2
      blahblah \$something in \$something2
#  end for
#end for
</pre></div>
</div>
</li>
<li><p class="first">made the handling of Template.compile()&#8217;s preprocessors arg simpler and
fixed a bug in it.</p>
</li>
<li><p class="first">fixed attribute name bug in the .compile() method (it affected the feature
that allows generated module files to be cached for better exception
tracebacks)</p>
</li>
<li><p class="first">refactored the #cache/CacheRegions code to support abitrary backend cache
data stores.</p>
</li>
<li><p class="first">added MemcachedCacheStore, which allows cache data to be stored in a
memcached backend.  See <a class="reference external" href="http://www.linuxjournal.com/article/7451">http://www.linuxjournal.com/article/7451</a> and
<a class="reference external" href="http://www.danga.com/memcached/">http://www.danga.com/memcached/</a>.  This is only appropriate for systems
running many Python server processes that need to share cached data to
reduce memory requirements. Don&#8217;t bother with this unless you actually
need it. If you have a limited number of Python server processes it is
much faster, simpler, and more secure to just cache in the memory of each
process.</p>
<p>KEEP MEMCACHED&#8217;S LIMITED SECURITY IN MIND!!  It has no authentication or
encryption and will introduce a gaping hole in your defenses unless you
are careful.  If you are caching sensitive data you should take measures
to ensure that a) untrusted local system users cannot connect to memcached
server, b) untrusted external servers cannot connect, and c) untrusted
users on trusted external servers cannot connect.  Case (a) can be dealt
with via iptable&#8217;s owner match module for one way to do this: &#8220;iptables -A
... -m owner ...&#8221;  Cases (b) and (c) can be handled by tunnelling
memcached network connections over stunnel and implementing stunnel
authentication with mandatory peer/client certs.</p>
</li>
<li><p class="first">some under-the-hood refactoring of the parser</p>
</li>
<li><p class="first">made it possible to add custom directives, or customize the
parsing/handling of existing ones, via the compiler settings
&#8216;directiveNamesAndParsers&#8217; and &#8216;endDirectiveNamesAndHandlers&#8217;</p>
</li>
<li><p class="first">added a compile-time macro facility to Cheetah. These macros are very
similar to macros in Lisp:
<a class="reference external" href="http://www.apl.jhu.edu/~hall/Lisp-Notes/Macros.html">http://www.apl.jhu.edu/~hall/Lisp-Notes/Macros.html</a>.</p>
<p>As with Lisp macros, they take source code (Cheetah source) as input and
return source code (again Cheetah source) as output. They are executed at
compile-time, just like in Lisp and C. The resultant code
gets executed at run-time.</p>
<p>The new #defmacro directive allows users to create macros inside the
source of their templates.  Macros can also be provided via the compiler
setting &#8216;macroDirectives&#8217;. The &#8216;macroDirectives&#8217; setting allows you to
share common macros between templates.</p>
<p>The syntax for the opening tag of #defmacro is the same as for #def and
#block.  It expects a macro name followed by an optional argument list in
brackets.  A <cite>src</cite> argument is automatically added to the beginning of
every macro&#8217;s argument list.  The value of the <cite>src</cite> is the block of
input source code that is provided during a macro call (see below):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#defmacro &lt;macroname&gt;[(argspec)]</span>
  <span class="o">&lt;</span><span class="n">macrobody</span><span class="o">&gt;</span>
<span class="c1">#end defmacro</span>
</pre></div>
</div>
<p>All of Cheetah&#8217;s syntax is available for use inside macros, but the
placeholderStartToken is &#64; instead of $ and the
directiveStartToken/EndToken is % instead of #.  Any syntax using the
standard $/# tokens will be treated as plain text and included in the output
of the macro.</p>
<p>Here are some examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#defmacro addHeaderFooter</span>
  <span class="n">header</span>
  <span class="nd">@src</span>
  <span class="n">footer</span>
<span class="c1">#end defmacro</span>

<span class="c1">#defmacro addHeaderFooter(header=&#39;h&#39;, footer=&#39;f&#39;)</span>
  <span class="nd">@header</span>
  <span class="nd">@src</span>
  <span class="nd">@footer</span>
<span class="c1">#end defmacro</span>
</pre></div>
</div>
<p>There is a single-line short form like for other directives:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#defmacro addHeaderFooter: header @src footer</span>
<span class="c1">#defmacro addHeaderFooter(header=&#39;h&#39;, footer=&#39;f&#39;): @header @src @footer</span>
</pre></div>
</div>
<p>The syntax for calling a macro is similar to the simplest usage of the
#call directive:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#addHeaderFooter
  Source \$code to wrap
#end addHeaderFooter

#addHeaderFooter: Source \$code to wrap

#addHeaderFooter header=&#39;header&#39;, footer=&#39;footer: Source \$code to wrap
</pre></div>
</div>
<dl class="docutils">
<dt>In Elisp you write</dt>
<dd><dl class="first last docutils">
<dt>(defmacro inc (var)</dt>
<dd><p class="first last">(list &#8216;setq var (list &#8216;1+ var)))</p>
</dd>
</dl>
</dd>
<dt>to define the macro <cite>inc</cite> and write</dt>
<dd><p class="first last">(inc x)</p>
</dd>
<dt>which expands to</dt>
<dd><p class="first last">(setq x (1+ x))</p>
</dd>
<dt>In Cheetah you&#8217;d write</dt>
<dd><p class="first last">#defmacro inc: #set &#64;src +=1
#inc: $i</p>
</dd>
<dt>which expands to</dt>
<dd><p class="first">#set $i += 1</p>
<p class="last">print Template(&#8220;&#8221;&#8220;\
#defmacro inc: #set &#64;src +=1
#set i = 1
#inc: $i
$i&#8221;&#8220;&#8221;).strip()==2</p>
</dd>
</dl>
</li>
<li><p class="first">fixed some bugs related to advanced usage of Template.compile(). These
were found via new unit tests. No one had actually run into them yet.</p>
</li>
<li><p class="first">added the initial bits of an #i18n directive.  It has the same semantics
as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#call self.handleI18n
  Some \$var cheetah source
#end call
</pre></div>
</div>
<p>but has a simpler syntax:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#i18n
  Some \$var cheetah source
#end i18n

## single-line short form:
#i18n: Some \$var cheetah source
</pre></div>
</div>
<p>The method it calls, self.handleI18n, is just a stub at the moment, but it
will soon be a wrapper around gettext.  It currently has one required
positional argument <cite>message</cite>. I anticipate supporting the following
optional arguments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">id</span> <span class="o">=</span> <span class="n">msgid</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">translation</span> <span class="n">catalog</span>
<span class="n">domain</span> <span class="o">=</span> <span class="n">translation</span> <span class="n">domain</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">source</span> <span class="n">lang</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">a</span> <span class="n">specific</span> <span class="n">target</span> <span class="n">lang</span>
<span class="n">comment</span> <span class="o">=</span> <span class="n">a</span> <span class="n">comment</span> <span class="n">to</span> <span class="n">the</span> <span class="n">translation</span> <span class="n">team</span>

<span class="n">plural</span> <span class="o">=</span> <span class="n">the</span> <span class="n">plural</span> <span class="n">form</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">a</span> <span class="n">sized</span> <span class="n">argument</span> <span class="n">to</span> <span class="n">distinguish</span> <span class="n">between</span> <span class="n">single</span> <span class="ow">and</span> <span class="n">plural</span> <span class="n">forms</span>
</pre></div>
</div>
<p>#i18n is executed at runtime, but it can also be used in conjunction with
a Cheetah preprocessor or macro (see above) to support compile time
translation of strings that don&#8217;t have to deal with plural forms.</p>
</li>
<li><p class="first">added Cheetah.Utils.htmlEncode and Cheetah.Utils.htmlDecode</p>
</li>
<li><p class="first">more docstring text</p>
</li>
</ul>
</div></blockquote>
<p>Unit tests: [TR]</p>
<blockquote class="last">
<div><ul class="simple">
<li>extended the caching tests</li>
<li>added tests for the various calling styles of Template.compile()</li>
<li>added copies of all the SyntaxAndOutput tests that use a template
baseclass other than <cite>Template</cite>. This ensures that all syntax &amp; core
features work with 2.0&#8217;s support for arbitrary baseclasses.</li>
<li>added tests for all the new directives and the new single-line short forms</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0rc2 (Jan 13th, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul class="simple">
<li>fixed some python 2.4isms that slipped in.  All the tests pass with Python
2.2 now</li>
<li>added lots more docstring content in the Template class</li>
<li>made multiline comments gobble whitespace like other directives, per JJ&#8217;s
request.  The rather longwinded compiler setting
gobbleWhitespaceAroundMultiLineComments can be used to go back to the old
non-gobbling behaviour if needed.</li>
<li>added #capture directive to complement the #call directive.
#call executes a region of Cheetah code and passes its output into a function call
#capture executes a region of Cheetah code and assigns its output to a variable</li>
<li>extended the compile caching code in Template.compile so it works with the
&#8216;file&#8217; arg.</li>
<li>added cacheModuleFilesForTracebacks and cacheDirForModuleFiles args to
Template.compile(). See the docstring for details.</li>
<li>misc internal refactoring in the parser</li>
<li>improved handling of keyword args in the __init__ method and fixed a
potential clash between the namespaces and searchList args</li>
</ul>
</div></blockquote>
<p>WWW: [TR]</p>
<blockquote class="last">
<div><ul class="simple">
<li>added the source for the new Cheetah website layout/content</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0rc1 (Jan 10, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul>
<li><p class="first">made it possible nest #filter directives</p>
</li>
<li><p class="first">added lots more docstring content in the Template class</p>
</li>
<li><p class="first">added Template.subclass() classmethod for quickly creating subclasses of
existing Cheetah template classes. It takes the same args as the
.compile() classmethod and returns a template that is a subclass of the
template .subclass() is called from:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">T1</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39; foo - \$meth1 - bar</span><span class="se">\\</span><span class="s1">n#def meth1: this is T1.meth1&#39;</span><span class="p">)</span>
<span class="n">T2</span> <span class="o">=</span> <span class="n">T1</span><span class="o">.</span><span class="n">subclass</span><span class="p">(</span><span class="s1">&#39;#implements meth1</span><span class="se">\\</span><span class="s1">n this is T2.meth1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">added baseclass arg to Template.compile(). It simplifies the reuse of
dynamically compiled templates:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># example 1, quickly subclassing a normal Python class and using its</span>
<span class="c1">#  __init__ call signature:</span>
  <span class="n">dictTemplate</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;hello \$name from \$caller&#39;</span><span class="p">,</span> <span class="n">baseclass</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
  <span class="nb">print</span> <span class="n">dictTemplate</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;me&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p># example 2, mixing a Cheetah method into a class definition:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">meth1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;foo&#39;</span>
    <span class="k">def</span> <span class="nf">meth2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;bar&#39;</span>
<span class="n">Foo</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;#implements meth3</span><span class="se">\\</span><span class="s1">nhello \$name from \$caller&#39;</span><span class="p">,</span>
                       <span class="n">baseclass</span><span class="o">=</span><span class="n">Foo</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">Foo</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">,</span> <span class="n">caller</span><span class="o">=</span><span class="s1">&#39;me&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A side-benefit is the possibility to use the same Cheetah source with
several baseclass, as the baseclass is orthogonal to the source code,
unlike the #extends directive.</p>
</li>
<li><p class="first">added &#8216;namespaces&#8217; as an alias for &#8216;searchList&#8217; in Template.__init__</p>
</li>
<li><p class="first">made it possible to pass in a single namespace to &#8216;searchList&#8217;, which will
automatically be converted into a list.</p>
</li>
<li><dl class="first docutils">
<dt>fixed issue with buffering and use of #call when template is used as a</dt>
<dd><p class="first last">webkit servlet</p>
</dd>
</dl>
</li>
<li><p class="first">added Cheetah.Utils.htmlEncode and htmlDecode</p>
</li>
</ul>
</div></blockquote>
<p>The command line tool (CheetahWrapper.py):</p>
<blockquote class="last">
<div><ul class="simple">
<li>changed insertion order for the &#8211;env and &#8211;pickle options so they match the
commandline UI of the compiled template modules themselves [TR]</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0b5 (Jan 7, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul>
<li><p class="first">made Cheetah.Template a new-style class by inserting &#8216;object&#8217; into its&#8217;
inheritance tree.  Templates can now use super(), properties and all the
other goodies that come with new-style classes.</p>
</li>
<li><p class="first">removed the WebInputMixin by placing its one method directly in the
Template class.</p>
</li>
<li><p class="first">removed the SettingsManager Mixin. It wasn&#8217;t being used by anything
anymore.</p>
</li>
<li><p class="first">added a framework for caching the results of compilations in
Template.compile().  This is on by default and protects against bad
performance issues that are due to programmers misguidedly compiling
templates inside tight loops.  It also saves on memory usage.</p>
</li>
<li><p class="first">misc attr name changes to avoid namespace pollution</p>
</li>
<li><p class="first">more + improved docstrings</p>
</li>
<li><p class="first">replaced the oldstyle dynamic compile hacks with a wrapper around
Template.compile().  The old usage pattern Template(src) now benefits from
most of the recent changes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Template</span><span class="p">(</span><span class="n">src</span><span class="p">)</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">==</span> <span class="n">Template</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">removed all the extra imports required by oldstyle dynamic compile hacks</p>
</li>
<li><p class="first">converted the cheetah #include mechanism to newstyle compilation and made it
more flexible</p>
</li>
<li><p class="first">made the #include mechanism work with file objects in addition to file names</p>
</li>
<li><p class="first">made the handling of args to Template.compile() more flexible.  You can now
provide defaults via class attributes.</p>
</li>
<li><p class="first">made preprocessors for Template.compile() work with file arguments</p>
</li>
<li><p class="first">added support for specifying a __metaclass__ on cheetah template classes</p>
</li>
<li><p class="first">refactored both the class and instance initialization processes</p>
</li>
<li><p class="first">improved the handling of __str__ in _assignRequiredMethodsToClass</p>
</li>
</ul>
</div></blockquote>
<p>The command line tool (CheetahWrapper.py):  [TR]</p>
<blockquote>
<div><ul class="simple">
<li>improved error output in CheetahWrapper</li>
<li>switched fill command over to new style compile usage</li>
</ul>
</div></blockquote>
<p>Unit tests: [TR]</p>
<blockquote class="last">
<div><ul class="simple">
<li>fixed format string bug in unittest_local_copy.py</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0b4 (Jan 6, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul>
<li><p class="first">fixed up parsing of target lists in for loops. This was previously limited
to fairly simple target lists:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#for (\$i, \$j) in [(&#39;aa&#39;,&#39;bb&#39;),(&#39;cc&#39;,&#39;dd&#39;)]
  \$i.upper,\$j.upper
#end for&quot;
#for (i, j) in [(&#39;aa&#39;,&#39;bb&#39;),(&#39;cc&#39;,&#39;dd&#39;)]
  \$i.upper,\$j.upper
#end for&quot;
#for i,(j, k) in enumerate([(&#39;aa&#39;,&#39;bb&#39;),(&#39;cc&#39;,&#39;dd&#39;)])
  \$j.upper,\$k.upper
#end for&quot;
</pre></div>
</div>
</li>
<li><p class="first">refactored the class initialization process</p>
</li>
<li><p class="first">improved handling of target lists in #set directive. This was previously
limited to fairly simple target lists.
#set i,j = [1,2] ... #set $i,$j = [1,2]
#set (i,j) = [1,2] ... #set ($i,$j) = [1,2]
#set i, (j,k) = [1,(2,3)] ... #set $i, ($j,$k) = [1,(2,3)]</p>
</li>
<li><p class="first">made it possible for the expressionFilter hooks to modify the code chunks
they are fed. Also documented the hooks in a docstring.  Thus the hooks
can be used as preprocessors for expressions, &#8216;restricted execution&#8217;, or
even enforcement of style guidelines.</p>
</li>
<li><p class="first">removed cheetah junk from docstrings and placed it all in comments or
__moduleVars__. Per JJ&#8217;s suggestion.</p>
</li>
<li><p class="first">made it possible to nest #cache directives to any level</p>
</li>
<li><p class="first">made it possible to nest #call directives to any level</p>
</li>
</ul>
</div></blockquote>
<p>Unit Tests [TR]</p>
<blockquote class="last">
<div><ul class="simple">
<li>extended tests for #for directive</li>
<li>expanded tests for #set directive</li>
<li>expanded tests for #call directive</li>
<li>expanded tests for #cache directive</li>
<li>added basic tests for the new $placeholder string expressions:
c&#8217;text $placeholder text&#8217;</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0b3 (Jan 5, 2006)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!
Core Changes: [TR]</p>
<blockquote>
<div><ul>
<li><p class="first">added #yield statement</p>
</li>
<li><p class="first">added ability to create nested scopes/functions via nested #def statements</p>
</li>
<li><p class="first">added new #call directive and related #arg directive, per Ian Bicking&#8217;s
suggestion.</p>
</li>
<li><p class="first">added new expression syntax c&#8221;text $placeholder text&#8221;</p>
<blockquote>
<div><p>for those basic function calling cases where you just need to pass in a
small bit of cheetah output as an argument:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">c</span><span class="s1">&#39;a string with \$placeholders&#39;</span><span class="p">,</span>
<span class="n">c</span><span class="s1">&#39;&#39;&#39;a string with \$placeholders&#39;&#39;&#39;</span><span class="p">,</span>
<span class="n">c</span><span class="s2">&quot;a string with \$placeholders&quot;</span><span class="p">,</span>
<span class="n">c</span><span class="s2">&quot;&quot;&quot;a string with \$placeholders&quot;&quot;&quot;</span>
</pre></div>
</div>
<ul>
<li><p class="first">They can&#8217;t contain #directives, but accept any valid $placeholder syntax
except caching placeholders. Caching placeholders don&#8217;t make any sense in
this context.</p>
</li>
<li><p class="first">They can be used *any* place where a python expression is expected.</p>
</li>
<li><p class="first">They can be nested to any depth:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>\$func(c&#39;&lt;li&gt;\$var1-\$var2&lt;/li&gt;&#39;)
\$func(c&#39;&lt;li&gt;\$var1-\$var2&lt;/li&gt;&#39;, doSomething=True)
\$func(content=c&#39;&lt;li&gt;\$var1-\$var2&lt;/li&gt;&#39;, doSomething=True)
\$func(lambda x,y: c&#39;&lt;li&gt;\$x-\$y&lt;/li&gt;&#39;)
\$func(callback=lambda x,y: c&#39;&lt;li&gt;\$x-\$y&lt;/li&gt;&#39;)
\$func(lambda x,y: c&#39;&lt;li&gt;\$x-\$y-\$varInSearchList&lt;/li&gt;&#39;)
\$func(c&#39;&lt;li&gt;\$var1-\$var2-\$(var3\*10)-\$(94.3\*58)&lt;/li&gt;&#39;)
\$func(c&#39;&lt;li&gt;\$var1-\$var2-\$func2(c&quot;a nested expr \$var99&quot;)&lt;/li&gt;&#39;)
#if \$cond then c&#39;&lt;li&gt;\$var1-\$var2&lt;/li&gt;&#39; else c&#39;&lt;p&gt;\$var1-\$var2&lt;/p&gt;&#39;
#def foo(arg1=c&#39;\$var1&lt;span class=&quot;foo&quot;&gt;\$var2&lt;/span&gt;&#39;):  blah \$arg1 blah
\$foo(c&#39;\$var1&lt;i&gt;\$var2&lt;/i&gt;&#39;)
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">added preprocessor hooks to Template.compile()
can be used for partial completion or &#8216;compile-time-caching&#8217;
... more details and examples coming.  It&#8217;s very useful, but takes a bit
of explaining.</p>
</li>
<li><p class="first">added &#8216;#set module varName = expr&#8217; for adding module globals. JJ&#8217;s suggestion</p>
</li>
<li><p class="first">improved generated docstring notes about cached vars</p>
</li>
<li><p class="first">fixed silly bug related to &#8220;&#8221;&#8221; in docstring comments and statements like
this &#8216;#def foo: $str(&#8220;&#8221;&#8220;foo&#8221;&#8220;&#8221;)&#8217;.  Reported by JJ.</p>
</li>
<li><p class="first">changed the handling of single-line defs so that
&#8216;#def xxx:&lt;just whitespace&gt;\n&#8217; will be treated as a multi-line #def.
The same applies to #block.  There&#8217;s a compiler setting to turn this off
if you really need empty single-line #def:&#8217;s.
JJ reported that this was causing great confusion with beginners.</p>
</li>
<li><p class="first">improved error message for unclosed directives, per Mike Orr&#8217;s suggestion.</p>
</li>
<li><p class="first">added optional support for passing the trans arg to methods via **KWS rather
than trans=None.  See the discussion on the mailing list Jan 4th (JJ&#8217;s post) for
details.  The purpose is to avoid a positional argument clash that
apparently is very confusing for beginners.</p>
<blockquote>
<div><p>Note that any existing client code that passing the trans arg in
positionally rather than as a keyword will break as a result.  WebKit
does this with the .respond method so I&#8217;ve kept the old style there.
You can also turn this new behaviour off by either manually including
the trans arg in your method signature (see the example below) or by
using the compiler setting &#8216;useKWsDictArgForPassingTrans&#8217;=False:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>#def manualOverride(arg1, trans=None)
  foo \$arg1
#end def
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>ImportHooks:</p>
<blockquote>
<div><ul class="simple">
<li>made the ImportHook more robust against compilation errors during import [TR]</li>
</ul>
</div></blockquote>
<p>Install scripts: [TR]</p>
<blockquote>
<div><ul class="simple">
<li>added optional support for pje&#8217;s setuptools</li>
<li>added cheeseshop classifiers</li>
<li>removed out of date install instructions in __init__.py</li>
</ul>
</div></blockquote>
<p>Servlet Base Class For Webkit: [TR]</p>
<blockquote>
<div><ul class="simple">
<li>disabled assignment of self.application (was a webware hack)</li>
</ul>
</div></blockquote>
<p>Unit Tests: [TR]</p>
<blockquote class="last">
<div><ul class="simple">
<li>unit tests for most of the new syntax elements</li>
<li>tidied up some old tests</li>
<li>misc refactoring</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0b2 (Dec 30, 2005)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!</p>
<p>Core Changes:</p>
<blockquote class="last">
<div><ul>
<li><p class="first">In previous versions of Cheetah tracebacks from exceptions that were raised
inside dynamically compiled Cheetah templates were opaque because
Python didn&#8217;t have access to a python source file to use in the traceback:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">File</span> <span class="s2">&quot;xxxx.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">192</span><span class="p">,</span> <span class="ow">in</span> <span class="n">getTextiledContent</span>
   <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">template</span><span class="p">(</span><span class="n">searchList</span><span class="o">=</span><span class="n">searchList</span><span class="p">))</span>
 <span class="n">File</span> <span class="s2">&quot;cheetah_yyyy.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">202</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__str__</span>
 <span class="n">File</span> <span class="s2">&quot;cheetah_yyyy.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">187</span><span class="p">,</span> <span class="ow">in</span> <span class="n">respond</span>
 <span class="n">File</span> <span class="s2">&quot;cheetah_yyyy.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">139</span><span class="p">,</span> <span class="ow">in</span> <span class="n">writeBody</span>
<span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">integer</span> <span class="n">division</span> <span class="ow">or</span> <span class="n">modulo</span> <span class="n">by</span> <span class="n">zero</span>
</pre></div>
</div>
<p>It is now possible to keep the generated source code from the python
classes returned by Template.compile() in a cache dir.  Having these files
around allows Python to include the actual source lines in tracebacks and
makes them much easier to understand:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="s2">&quot;/usr/local/unsnarl/lib/python/us/ui/views/WikiPageRenderer.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">192</span><span class="p">,</span> <span class="ow">in</span> <span class="n">getTextiledContent</span>
  <span class="n">content</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">template</span><span class="p">(</span><span class="n">searchList</span><span class="o">=</span><span class="n">searchList</span><span class="p">))</span>
<span class="n">File</span> <span class="s2">&quot;/tmp/CheetahCacheDir/cheetah_yyyy.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">202</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__str__</span>
  <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">respond</span><span class="p">()</span>
<span class="n">File</span> <span class="s2">&quot;/tmp/CheetahCacheDir/cheetah_yyyy.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">187</span><span class="p">,</span> <span class="ow">in</span> <span class="n">respond</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">writeBody</span><span class="p">(</span><span class="n">trans</span><span class="o">=</span><span class="n">trans</span><span class="p">)</span>
<span class="n">File</span> <span class="s2">&quot;/tmp/CheetahCacheDir/cheetah_yyyy.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">139</span><span class="p">,</span> <span class="ow">in</span> <span class="n">writeBody</span>
  <span class="n">__v</span> <span class="o">=</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span> <span class="c1"># \$(0/0)</span>
<span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">integer</span> <span class="n">division</span> <span class="ow">or</span> <span class="n">modulo</span> <span class="n">by</span> <span class="n">zero</span>
</pre></div>
</div>
<p>This is turned off by default. To turn it on, do this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NiceTracebackTemplate</span><span class="p">(</span><span class="n">Template</span><span class="p">):</span>
    <span class="n">_CHEETAH_cacheModuleFilesForTracebacks</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_CHEETAH_cacheDirForModuleFiles</span> <span class="o">=</span> <span class="s1">&#39;/tmp/CheetahCacheDir&#39;</span> <span class="c1"># change to a dirname</span>

<span class="n">templateClass</span> <span class="o">=</span> <span class="n">NiceTracebackTemplate</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>

<span class="c1"># or</span>
<span class="n">templateClass</span> <span class="o">=</span> <span class="n">Template</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span>
   <span class="n">cacheModuleFilesForTracebacks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cacheDirForModuleFiles</span><span class="o">=</span><span class="s1">&#39;/tmp/CheetahCacheDir&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This only works with the new Template.compile(src) usage style!</p>
<p>Note, Cheetah generated modules that are compiled on the command line have
never been affected by this issue. [TR]</p>
</li>
<li><p class="first">added an extra comment per $placeholder to generated python code so it is
easier to grok. [TR]</p>
</li>
</ul>
</div></blockquote>
</dd>
<dt>2.0b1 (Dec 29, 2005)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!</p>
<p>Core Changes:</p>
<blockquote>
<div><ul>
<li><p class="first">enabled use of any expression in ${placeholders}. See the examples I posted to
the email list on Dec 12th.  All use cases of the #echo directive can now
be handled with ${placeholders}.  This came from a suggestion by Mike
Orr. [TR]</p>
</li>
<li><p class="first">made it possible for templates to #extend (aka subclass) any arbitrary
baseclass, including Python&#8217;s new style classes.  You must either compile
your classes on the command line or use the new classmethod
Template.compile() as described below.  The old Template(src) interface
still works, provided you don&#8217;t try to use this new arbitrary baseclass
stuff.  See my messages to the email list for more details. [TR]</p>
</li>
<li><p class="first">made it possible to create template classes dynamically, rather than just
instances.  See the new classmethod Template.compile().  See my messages
to the email list for more details. [TR]</p>
<blockquote>
<div><p>klass = Template.compile(src)</p>
</div></blockquote>
</li>
<li><p class="first">made it easier to work with custom compiler settings, particularly from
the command line tool.  You can now define a subclass of Template which
will compile your templates using custom compilerSettings, or even a
custom compiler class, without requiring you to manually pass in your
compilerSettings each time or define them in the template src itself via
the #compiler directive.  You can make the command line tool use your
subclass by defining the environment variable CHEETAH_TEMPLATE_CLASS.  It
should be in the form &#8216;package.module:class&#8217;.  See my messages
to the email list for more details. [TR]</p>
</li>
<li><p class="first">made it possible to pass the searchList in as an argument to #def&#8217;ined
methods.  This makes all lookup that occur within the scope of that method
use the provided searchList rather than self._searchList.  This does not
carry over to other methods called within the top method, unless they
explicitly accept the searchList in their signature AND you pass it to
them when calling them.  This behaviour can be turned off with the
corresponding compilerSetting &#8216;allowSearchListAsMethArg&#8217; [TR]</p>
</li>
<li><p class="first">added hooks for filtering / restricting dangerous stuff in cheetah source
code at compile time.  These hooks can be used to enable Cheetah template
authoring by untrusted users. See my messages to the email list for more
details. Note, it filters expressions at parse/compile time, unlike Python&#8217;s
old rexec module which restricted the Python environment at runtime. [TR]</p>
<blockquote>
<div><p># Here are the relevant compiler settings:
# use lower case keys here!!
&#8216;disabledDirectives&#8217;:[], # list of directive keys, without the start token
&#8216;enabledDirectives&#8217;:[], # list of directive keys, without the start token</p>
<dl class="docutils">
<dt>&#8216;disabledDirectiveHooks&#8217;:[], # callable(parser, directiveKey),</dt>
<dd><p class="first last"># called when a disabled directive is found, prior to raising an exception</p>
</dd>
</dl>
<p>&#8216;preparseDirectiveHooks&#8217;:[], # callable(parser, directiveKey)
&#8216;postparseDirectiveHooks&#8217;:[], # callable(parser, directiveKey)</p>
<p>&#8216;preparsePlaceholderHooks&#8217;:[], # callable(parser)
&#8216;postparsePlaceholderHooks&#8217;:[], # callable(parser)</p>
<p>&#8216;expressionFilterHooks&#8217;:[],
# callable(parser, expr, exprType, rawExpr=None, startPos=None)
# exprType is the name of the directive, &#8216;psp&#8217;, or &#8216;placeholder&#8217;.
#all lowercase</p>
</div></blockquote>
</li>
<li><p class="first">added support for a short EOLSlurpToken to supplement the #slurp
directive.  It&#8217;s currently re.compile(&#8216;#\s*\n&#8217;) (i.e # followed by
arbitrary whitespace and a new line), but this is not set in stone.  One
other suggestion was the backslash char, but I believe Python&#8217;s own
interpretation of backslashes will lead to confusion.  The compiler
setting &#8216;EOLSlurpToken&#8217; controls this.  You can turn it off completely by
setting &#8216;EOLSlurpToken&#8217; to None. See the email list for more details. [TR]</p>
</li>
<li><p class="first">added &#8216;_CHEETAH_&#8217; prefix to all instance attribute names in compiled
templates. This is related to the arbitrary baseclass change. [TR]</p>
</li>
<li><p class="first">shifted instance attribute setup to _initCheetahAttributes() method.  This
is related to the arbitrary baseclass change. [TR]</p>
</li>
<li><p class="first">made it possible to use full expressions in the #extends directive, rather
than just dotted names. This allows you to do things like this:</p>
<p>#from xx.TemplateRepository import getTemplateClass
#extends getTemplateClass(&#8216;someName&#8217;)</p>
<p>I don&#8217;t expect this to be used much. I needed it for a wiki system in
which the baseclasses for the templates are dynamically compiled at run
time and are not available via simple imports. [TR]</p>
</li>
<li><p class="first">added compiler setting autoImportForExtendDirective=True, so this existing
default behaviour can be turned off when needed. [TR]</p>
</li>
<li><p class="first">fixed a bug in the parsing of single-line #def&#8217;s and #block&#8217;s when they
are enclosed within #if ... #end if. Reported by Marcin Gajda [TR]</p>
</li>
<li><p class="first">tweak to remove needless write(&#8216;&#8217;) calls in generated code [TR]</p>
</li>
</ul>
</div></blockquote>
<p>The command line tool (CheetahWrapper.py):</p>
<blockquote>
<div><ul class="simple">
<li>added code to cleanup trailing slashes on path arguments (code originally
from Mike Orr) [TR]</li>
<li>turned on the ImportHooks by default for the &#8216;cheetah fill&#8217; command. See the
discussion on the email list [TR]</li>
</ul>
</div></blockquote>
<p>ImportHooks:</p>
<blockquote class="last">
<div><ul class="simple">
<li>fixed a name error bug in the ImportHooks [TR]</li>
</ul>
</div></blockquote>
</dd>
<dt>1.0 (Dec 4, 2005)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!</p>
<p class="last">Version bump from 1.0rc3</p>
</dd>
<dt>1.0rc3 (Nov 30, 2005)</dt>
<dd><p class="first">!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!</p>
<ul class="last">
<li><p class="first">added useSearchList compiler setting [TR]
This defaults to True, but if false, the compiler assumes the first
portion of a $variable (before the first dot) is a global, builtin, or local
var that doesn&#8217;t need looking up in the searchlist.  NameMapper&#8217;s unified
dotted notation will still be used on the rest of the lookup (provide the
setting useNameMapper==True):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>\$aLocalDictVar.aKey.somethingElse
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
<p>1.0rc2 (Nov 19, 2005)</p>
<blockquote>
<div><p>!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!</p>
<p>See my email to the cheetahtemplate-discuss list on Sat. Nov. 12th for more
details on these changes:</p>
<ul class="simple">
<li>faster list-based buffering in DummyTrans, rather than StringIO (my
benchmarks showed it to be significantly faster.  collections.deque wasn&#8217;t
any faster than a simple list.) [TR]</li>
<li>new CompilerSettings to tweak generated code: [TR]
* alwaysFilterNone: filter out None immediately, before the filter is called
* useFilters: allows you to turn them off completely and default to str()
* includeRawExprInFilterArgs: allows you to disable this behaviour
* autoAssignDummyTransactionToSelf: off by default</li>
<li>and automatic $trans finding without having to pass it as an arg to methods
based Jonathan Mark&#8217;s suggestion.  If the template&#8217;s self.transaction
attribute has been set, each method of the template will use it when
called. [TR]</li>
<li>applied Chris Murphy&#8217;s patch to fix a bug in the #shBang directive. [TR]</li>
</ul>
</div></blockquote>
<p>1.0rc1 (Nov 2, 2005)</p>
<blockquote>
<div><p>!!!THIS RELEASE REQUIRES RECOMPILATION OF ALL COMPILED CHEETAH TEMPLATES!!!</p>
<ul class="simple">
<li>added the compiler option &#8220;useStackFrames&#8221; for optionally turning off the
default lookup method which doesn&#8217;t work with psyco because it uses stack
frame introspection.  When useStackFrames=False, an alternative psyco
friendly lookup method is used. [TR]</li>
<li>fixed treatment of None in several filters, bug reported by Daniele Varrazzo
[TR]</li>
</ul>
</div></blockquote>
<p>0.9.18 (Aug 22, 2005)</p>
<blockquote>
<div><ul class="simple">
<li>version bump from 0.9.18rc1 [TR]</li>
</ul>
</div></blockquote>
<p>0.9.18rc1 (Aug 15, 2005)</p>
<blockquote>
<div><ul class="simple">
<li>applied Philippe Normand&#8217;s patch for extended cache support [TR]</li>
<li>added filter RawOrEncodedUnicode to fix a unicode issue that was discussed
on the email list on Aug. 9th 2005 [TR]</li>
</ul>
</div></blockquote>
<p>0.9.17 (May 30, 2005)</p>
<blockquote>
<div><ul class="simple">
<li>this is just 0.9.17rc1 repackaged [TR]</li>
</ul>
</div></blockquote>
<p>0.9.17-rc1 (May 12, 2005)</p>
<blockquote>
<div><p>This simple bug fix release resolves some issues introduced by
under-the-hood changes in release 0.9.16a1.</p>
<ul class="simple">
<li>removed the use of temp files for handling imports with dynamic
compilation. This removes a whole slew of issues, including a temp file
security issue reported on the email list by Brian Bird. [TR]</li>
<li>fixed bug with handling of the searchList with dynamic inheritance, as
reported by  Brian Bird. [TR]</li>
</ul>
</div></blockquote>
<p>0.9.16 (Mar 27, 2005)</p>
<blockquote>
<div><ul class="simple">
<li>this is just 0.9.16b1 repackaged [TR]</li>
</ul>
</div></blockquote>
<p>0.9.16b1 (Feb 28, 2005)</p>
<blockquote>
<div><ul class="simple">
<li>fixed attr error in Parser.eatEncoding [TR]</li>
<li>some tweaks to Compiler.py to prevent errors with dynamically compiled
templates [TR]</li>
<li>added tests for the #encoding directive [TR]</li>
</ul>
</div></blockquote>
<p>0.9.16a1 (Jan 6, 2005)</p>
<blockquote>
<div><ul class="simple">
<li>fixed a unicode bug in Compiler.py [TR]</li>
<li>added new EncodeUnicode filter that Rene Pijlman contributed (I optimized it
slightly) and made it the default filter for all templates. [TR]</li>
<li>added test cases for handling unicode with the default filter [TR]</li>
<li>fixed a caching bug related to the #include directive. Thanks to Michael
Engelhart for reporting it.[TR]</li>
<li>added the new #encoding directive to handle PEP 263
<a class="reference external" href="http://www.python.org/doc/2.3/whatsnew/section-encodings.html">http://www.python.org/doc/2.3/whatsnew/section-encodings.html</a> [TR]</li>
<li>Tools.CGITemplate: fix bug in comment.[MO]</li>
<li>Abort with a helpful error message if user runs &#8216;cheetah test&#8217; in a
directory without write permission.  (Kludge in CheetahWrapper.py; we
should probably move the temp files under the system tmp directory.) [MO]</li>
<li>added better string type checking for args in Template.py, as suggested by
Terrel Shumway [TR]</li>
<li>minor tweak to the class attribute lookup style in the Compiler.py
__getattr__ methods [TR]</li>
<li>Fix printf format bug in &#8220;cheetah c &#8211;debug&#8221;, found by Terry MacDonald. [MO]</li>
<li>Disabled NameMapperDict test (in SyntaxAndOutput.py) because the
namemappers still have the dict-method bug.  (Reminder: don&#8217;t use
placehold names like $update that match dict method names.) [MO]</li>
<li>#repeat now uses a local variable of the form __i$num which permits
nesting [JJ]</li>
<li>implemented a modified version of Bob and JJ&#8217;s patch for better parser
warnings about mismatched directives and #end directives [TR]</li>
<li>lots of little cleanups and refactoring [TR]</li>
<li>refactored the class tree for the Parser and Compiler.  They are now
completely separate trees and the communication between them is one-way:
explicit commands from the parser to the compiler.  The parser now handles
all parsing tasks by itself and delegates *all* code generation to the
compiler.  This last bit was my original intention, but things got a bit
mixed up over time.  Also, all SettingsManager stuff for handling
compiler/parser settings is now handled by ModuleCompiler.  This should make
it easier to grok, maintain, and extend both. [TR]</li>
<li>improved the parsing of singe-line #if directives. [TR]</li>
<li>removed the old webware example of the cheetah site, as it was way out of
date and was more confusing than helpful. [TR]</li>
<li>added two new lookup functions to NameMapper (valueFromFrame and
valueFromFrameOrSearchList) and synchronized the behaviour of the C and
Python versions of all functions. [TR]</li>
<li>improved the exception handling of both versions of NameMapper. NotFound
exceptions now include more detail about what wasn&#8217;t found. [TR]</li>
<li>made NameMapper&#8217;s searchList lookup functions work with any iterable
type/class rather than just with lists. [TR]</li>
<li>added and updated a variety of test cases. [TR]</li>
<li>checked in a patch to CheetahWrapper that improves handling of the odir
option when the path is absolute.  I can&#8217;t remember where the patch came
from. [TR]</li>
<li>checked in a patch to Template.py for better include/import support under
Jython.  Again, I&#8217;ve forgotten who contributed it. [TR]</li>
<li>updated various bits of the user guide. [TR]</li>
<li>made the Cheetah NameMapper calls in the generated code use the new function
valueFromFrameOrSearchList rather than passing locals, searchList, globals,
and __builtins__ into valueFromSearchList.  This is faster, less bug prone
and simpler to read/grok. I also removed all tracking of local
variable names by the compiler. [TR]</li>
<li>other misc. refactorings [TR]</li>
</ul>
</div></blockquote>
<p>0.9.15 (Mar 25, 2003)</p>
<blockquote>
<div><ul class="simple">
<li>a minor tweak to the cleanup actions of one of the test cases [TR]</li>
</ul>
</div></blockquote>
<p>0.9.15rc2 (Mar 23, 2003)</p>
<blockquote>
<div><ul class="simple">
<li>Fixed a python version dependency bug related to Compiler.py&#8217;s use of
isinstance() [TR]</li>
</ul>
</div></blockquote>
<p>0.9.15rc1 (Mar 21, 2003)</p>
<blockquote>
<div>This is just 0.9.15b1 renamed.</div></blockquote>
<p>0.9.15b1 (Mar 17, 2003)</p>
<blockquote>
<div><ul class="simple">
<li>The Cheetah version of unittest now prints a blank line after each
traceback to separate them.  (MO)</li>
<li>.webInput() now saves the cgi.FieldStorage() instance in a global
variable rather than recreating it each call.  That should allow the
method to be called multiple times with POST variables outside Webware.
(MO)</li>
<li>CheetahWrapper: no verbose output on stdout with &#8211;stdout/-p. (MO)</li>
<li>&#8220;#indent&#8221; is now undocumented.  The existing code remains intact for now.
See the TODO file for our future plans. (MO)</li>
<li>Apply 2 unicode-support patches from Rodrigo B. de Oliveira (rodrigobamboo)
that affected the Template and ModuleCompiler classes. (TR)</li>
<li>Template: compiling a template from a string now works if the current
directory doesn&#8217;t have write permission.  (MO)</li>
<li>remove temporary .pyo files in addition to .py and .pyc files (TR)</li>
</ul>
</div></blockquote>
<p>0.9.15a3 (Nov 10, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>corrected a dictionary bug in the Python version of NameMapper (TR)</li>
<li>Rewrote the &#8220;cheetah&#8221; command (CheetahWrapper.py) again and added test
cases.  New options &#8211;flat and &#8211;nobackup; &#8211;stdout is now a synonym for
-p.  See the &#8220;cheetah compile&#8221; section in the Users&#8217; Guide for details.
Deleted Utils.dualglob: merged into CheetahWrapper.  (MO)</li>
<li>.addToSearchList() and .prependToSearchList() are gone.  Instead of
adding containers to the searchList after instantiation, pass all the
containers you need to the constuctor, keep another reference somewhere
to the containers, and modify the containers directly.  Generic libraries
that want to add a new kind of information to the searchList (e.g.,
web variables) should do &#8220;self.searchList().insert(0, myContainer)&#8221;. (MO)</li>
</ul>
</div></blockquote>
<p>0.9.15a2 (Nov 4th, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>Filters now have access to the name of the placeholder they&#8217;re filtering.
In the .filter() method, kw[&#8216;rawExpr&#8217;] gives the entire placeholder name
including subscripts and arguments, exactly as it appears in the template
definition. (TR)</li>
<li>Fix three bugs in &#8220;cheetah compile -R&#8221;: (1) the generated class name
contained the subdirectory, (2) the destination path did not contain the
subdirectory, (3) Cheetah failed to create the destination subdirectory
if missing.  All subdirectories created have an &#8220;__init__.py&#8221; file.
&#8220;cheetah fill -R&#8221; does the same thing but does not create
&#8220;__init__.py&#8221;. (MO)  NOTE: this is still buggy!</li>
<li>New directory &#8220;attic&#8221; in source contains code that has been abandoned
for now but may come in handy someday. (MO)</li>
<li>Tests.CheetahWrapper: test suite for &#8220;cheetah compile&#8221; and
&#8220;cheetah fill&#8221;.  If the module is run from the command line, the
option &#8220;&#8211;list PATH/CheetahWrapper.py&#8221;, lists all scenarios that would be
tested; the argument is the path to the test module itself. (MO)</li>
<li>made Cheetah.NameMapper.NotFound subclass the builtin LookupError (TR)</li>
<li>added an initial implementation of single line #if directives
#if &lt;condition&gt; then &lt;true&gt; else &lt;false&gt;
The parsing is fairly rudimentary for now and assumes that the keywords
&#8216;then&#8217; and &#8216;else&#8217; won&#8217;t appear any inside a string in this directive (TR)</li>
</ul>
</div></blockquote>
<p>0.9.15a1 (Oct 6th, 2002)</p>
<blockquote>
<div><ul>
<li><p class="first">fixed a package-relative import bug in ImportHooks.py (TR)</p>
</li>
<li><p class="first">set &#8216;monitorSrcFile&#8217; to false as it was causing problems with the
ImportHooks ... This might be temporary as the problem needs more thought
(TR)</p>
</li>
<li><p class="first">fixed meta tag http_equiv to be http-equiv in SkeletonPage (TR)</p>
</li>
<li><p class="first">$webInput (Utils.WebInputMixin) &#8216;source&#8217; arg can be either case. (MO)</p>
</li>
<li><p class="first">fixed code-gen bug in MethodCompiler.commitStrConst that was leading to
triple single quotes followed immediately by another single quote if the
template def contained a &#8216;$placeholder&#8217; surrounded in single quotes and
multiple \n newlines ... plus added new test case.(TR)</p>
</li>
<li><p class="first">undocumented the &#8216;#settings&#8217; directive.  The directive itself will be
removed soon.  (MO)</p>
</li>
<li><p class="first">Utils.optik: Optik 1.3 package by Gregory P Ward, for parsing
command-line options in &#8216;cheetah&#8217; comamnd.  Copied unchanged into
Cheetah except added &#8220;Cheetah.Utils.optik.&#8221; prefix to intra-package
imports.  Optik&#8217;s copyright and license is in an appendix in the
Cheetah Users&#8217; Guide.  (MO)</p>
</li>
<li><p class="first">rewrite of the &#8220;cheetah&#8221; and &#8220;cheetah-compile&#8221; commands.
The command-line options have changed!  Removed CheetahCompile module
removed and its test suite too; CheetahWrapper now takes its place. (MO)</p>
</li>
<li><p class="first">Utils.dualglob: new module to recursively generate source+destination
filenames from command-line filespecs. (MO)</p>
</li>
<li><p class="first">The command-line options of .py template modules have also changed
to conform with the &#8220;cheetah&#8221; command.  Also a &#8211;pickle bug was
fixed.  (MO)</p>
</li>
<li><p class="first">Utils.WebMixin: made a string type comparision backward compatible.
This was why the Cheetah test suite was failing on Python &lt; 2.2! (MO)</p>
</li>
<li><p class="first">SettingsManager._createConfigFile(): bugfix in default argument. (MO)</p>
</li>
<li><p class="first">$hasVar(&#8216;varName&#8217;) is an alias for $varExists(&#8216;varName&#8217;).  (MO)</p>
</li>
<li><p class="first">$_fileDirName and $_filePath are now None rather than missing if
the template definition did not come from a named file.  (MO)</p>
</li>
<li><p class="first">applied patch on SourceForge for &#8220;%&#8221; in default arguments of a block (TR)</p>
</li>
<li><p class="first">removed the _underscored attribute lookup step from NameMapper NOTE THIS
MIGHT BREAK EXISTING TEMPLATES (TR)</p>
</li>
<li><p class="first">Install Cheetah into site-packages/Cheetah/ rather than
site-packages/Webware/Cheetah/. Added code to automatically remove the old
dir.(TR)</p>
</li>
<li><p class="first">fixed the variable name resolution order bug in $placeholders.  The new
implementation uses:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">valueFromSearchList</span><span class="p">([</span><span class="nb">locals</span><span class="p">()]</span> <span class="o">+</span> <span class="n">searchList</span> <span class="o">+</span> <span class="p">[</span><span class="nb">globals</span><span class="p">(),</span> <span class="n">__builtin__</span><span class="p">],</span>
<span class="n">rest</span> <span class="n">of</span> <span class="n">the</span> <span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">lookups</span><span class="o">.</span> <span class="p">(</span><span class="n">TR</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">removed the #settings directive (TR)</p>
</li>
<li><p class="first">added the #del directive, for using Python&#8217;s del statement (TR)</p>
</li>
<li><p class="first">I think I&#8217;ve fixed the problem with the searchList arg being discarded when a
template is generated from a .tmpl file that #extends another template. This
bug was reported by Edmund on Aug 30th
(subject: &#8220;Bug? Was: Really basic searchList question&#8221;) (TR)</p>
</li>
</ul>
</div></blockquote>
<p>0.9.14 (July 14, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>Precompiled template Templates/SkeletonPage.py added to CVS.  This file is
needed for Cheetah&#8217;s regression tests. (MO)</li>
<li>removed automatic recompilation of .py template in memory if the
.tmpl file has changed.  (TR)</li>
</ul>
</div></blockquote>
<p>0.9.14b1 (June 30, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>moved the Users&#8217; Guide and the Developers&#8217; Guide into a separate CVS module,
&#8216;CheetahDocs&#8217;, so they can be distributed separately from the source distro
(TR,MO)</li>
<li>added TypeType to the types that NameMapper won&#8217;t do autocalling on (TR)</li>
<li>in Template.py moved the global LegalKWs to Template._legalKWs (TR)</li>
<li>made #set work with RVALUES that are missing the recommended $ (TR)</li>
<li>added some new test cases for the #set directive (TR)</li>
<li>fixed bug in the output of the #unless directive that Mike found (TR)</li>
<li>added some module constants to clear up a missing name bug that Mike found
in cases where you use **KW in a Cheetah method definition (TR)</li>
<li>fixed a bug in Parser.py:_LowLevelSemanticsParser.getExpression() that was
related to the default enclosures=[] argument.  This arg was unintentionally
being shared between calls and thus leading to parsing errors as reported by
Greg Czajkowski (TR)</li>
<li>Filter: fixed an &#8216;== None&#8217; expression (should be &#8216;is None&#8217;). (MO)</li>
<li>TemplateMisc: new base class for Template.  This is for optional
convenience methods that don&#8217;t require Webware. (MO)</li>
<li>User&#8217;s Guide: new sections &#8220;Non-Webware HTML Output&#8221; and &#8220;Non-HTML
Output&#8221;. (MO)</li>
<li>Expanded $webInput() &#8211; renamed from $cgiImport() &#8211; to work both with
Webware input and CGI scripts.  Handles GET/POST/cookie/session vars under
Webware, and GET/POST under CGI.  Defined in Cheetah.Utils.WebInputMixin,
now inherited by Template directly. (MO)</li>
<li>Tools.CGITemplate has methods to output CGI headers: .isCgi, .cgiHeaders
and .cgiHeadersHook in TemplateMisc. (MO)</li>
<li>New #indent directive allows you to indent block constructs in the
template definition without having that indentation in the output, and
allows you to set the output indentation per line independent of the
indentation in the template definition.  This version uses Robert
Kuzelj&#8217;s #indent syntax exactly.  In the next few days,
Cheetah.Utils.Indenter will be refactored and
*** THE #INDENT SYNTAX WILL CHANGE! *** (MO)</li>
<li>added the #return directive as requested by Robert Kulezj (TR)</li>
<li>added some test cases for the #return directive (TR)</li>
<li>removed buggy import statement that had been left in Servlet.py after the
CGIInputMixin changes (TR)</li>
</ul>
</div></blockquote>
<p>0.9.13 (May 8, 2002)</p>
<blockquote>
<div><ul>
<li><p class="first">changed Cheetah.Servlet.isRunningFromWebKit to isWebwareInstalled (TR)</p>
</li>
<li><p class="first">fixed parsing bug that would exit an expression if the directiveEndToken was a
valid Python token and was found inside the directive.  (TR)</p>
<p>E.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#compiler-settings</span>
<span class="n">directiveStartToken</span> <span class="o">=</span> <span class="o">.</span>
<span class="n">directiveEndToken</span> <span class="o">=</span> <span class="p">:</span>
<span class="n">commentStartToken</span> <span class="o">=</span> <span class="c1">#</span>
<span class="c1">#end compiler-settings</span>

<span class="o">.</span><span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">]:</span>
<span class="n">blag</span>
<span class="o">.</span><span class="n">end</span> <span class="k">for</span>
</pre></div>
</div>
</li>
<li><p class="first">fixed #include bug that was resulting in non-unique includeIDs (TR)</p>
</li>
</ul>
</div></blockquote>
<p>0.9.13b2 (May 3, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>fixed the bug in Cheetah.Servlet.Servlet.serverSidePath that Jeff Johnson
found. (TR)</li>
<li>changed the attribute Cheetah.Servlet.ServletisRunningFromWebKit to
isControlledByWebKit and set the default to False unless the .awake method
is called.  This makes a clear distinction between templates that are being
used with WebKit via the inheritance approach and the containment approach
(TR)</li>
</ul>
</div></blockquote>
<p>0.9.13b1 (May 1, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>Was going to import cStringIO instead of StringIO, but it made the
DummyTransaction.py unittest fail so I undid it.  Cheetah aims to provide
Unicode support, which cStringIO does not provide. (TR/MO)</li>
<li>Utils.Misc.CheckKeywords(): prevent misspelled keyword arguments,
used by Template constructor. (MO)</li>
<li>removed support for multiple inheritance (TR)</li>
<li>added some bounds-checking code to _namemapper.c&#8217;s getNameChunks function
(TR)</li>
<li>changed the exceptions in _namemapper.c from the old string exceptions
to proper exception objects (TR)</li>
<li>first portion of Developers&#8217; Guide written (MO)</li>
<li>implemented the extended #extends directive, which does automatic importing
(MO,TR)</li>
<li>added some new testcases for the extended #extends directive (TR)</li>
<li>lots of work on the Users&#8217; Guide (MO)</li>
<li><dl class="first docutils">
<dt>implemented and tested an import hook for .tmpl files (TR):</dt>
<dd>import MyTemplate  # will compile and import MyTemplate.tmpl</dd>
</dl>
</li>
<li>made my True/False declarations friendly with Python 2.2.1, which already
includes True/False as builtins (TR)</li>
<li><dl class="first docutils">
<dt>implemented the #compiler directive that Edmund Lian suggested (TR)</dt>
<dd><dl class="first last docutils">
<dt>e.g.:</dt>
<dd>#compiler commentStartToken = &#8216;//&#8217;
// a comment
#compiler reset
// no longer a comment</dd>
</dl>
</dd>
</dl>
</li>
<li>fixed the bug that Edmund Lian found in .addSet() when useNameMapper = 0
(TR)</li>
<li>fixed bug in comment creation using lineCol that Mike found (TR)</li>
</ul>
</div></blockquote>
<p>0.9.12 (April 3, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>no code changes from beta 2</li>
<li>more work on the docs (MO)</li>
</ul>
</div></blockquote>
<p>0.9.12b2 (Mar 28, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>fixed Win32 path bug in Template._makeDummyPackageForDir() (TR)</li>
<li>prettied up the format of the debug comments in the Cheetah generated
Python code (TR)</li>
<li>fixed the non-unique key error in Template._includeCheetahSource (TR)</li>
<li>fixed the module import bug in &#8216;cheetah compile -w&#8217; (TR)</li>
</ul>
</div></blockquote>
<p>0.9.12b1 (Mar 24, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>$request().field(args) now works, identical to $request.field(args)
to implement this, the request object is now self.request() instead of
self.request.  This provides compatibility with Webware&#8217;s servlet API.
(self.session already was an accessor method).  New read-only attribute
self.isRunningFromWebKit is boolean.  All changes are in Servlet.py. (MO)</li>
<li>fixed nested-NotFound bug in _namemapper.c&#8217;s valueFromSearchList (TR)</li>
<li>&#8216;cheetah&#8217; wrapper script has abbreviation -c for the &#8216;compile&#8217; command,
-t for &#8216;test&#8217;, and an ASCII-art cheetah face in the help message. (MO)</li>
<li>CheetahCompile.py: fixed to recognize &#8211;help option and to show &#8211;help/-h
in help message. (MO)</li>
<li>CheetahCompile.py:
changed the order of the VERBOSE mode printouts, as per Mike&#8217;s request (TR)</li>
<li>Template.py:
fixed the #include&#8217;d template searchList sharing problem, as reported by
Johannes (TR)</li>
<li>corrected namemapper translation bug in
Compiler.GenUtils.genNameMapperVar() (TR)</li>
<li>Utils.Misc.UseOrRaise(): convenience function to return a
value, or raise it if it&#8217;s a subclass of Exception. (MO)</li>
<li>Utils.CGIImportMixin replaces Tools.WebwareMixin.  Servlet now
subclasses it.  This adds the .cgiImport() method to all servlets, allowing
sophisticated retrieval of form fields, cookies or session variables from
one line of Cheetah or Python code.  See module docstring. (MO)</li>
<li>lots of updates to the docs (MO)</li>
</ul>
</div></blockquote>
<p>0.9.11 (Mar 07, 2002)</p>
<blockquote>
<div><ul class="simple">
<li>fixed a careless bug in cheetah-compile (TR)</li>
<li>implemented the new &#8216;cheetah&#8217; wrapper script (TR)</li>
<li>refactored the local copy of unittest a bit (TR)</li>
</ul>
</div></blockquote>
<p>0.9.10 (Mar 06, 2002): Primarily a bug fix release</p>
<blockquote>
<div><ul class="simple">
<li>fixed bug in srcfile-mtime monitoring / update code (TR)</li>
<li>fixed the parsing of single-line #defs and #blocks so they can have
arguments (TR)</li>
<li>added test cases for single-line #defs and #blocks with args (TR)</li>
<li>fixed a silly typo bug in Parser.py where a comma was left at the end of
regex definition, make it a tuple rather than a regex</li>
<li>fixed the directive matching bug that Jeff Johnson reported.  It was
causing #else# to not match, while #else # was matching. + added a test
for it.(TR)</li>
<li>fixed bug in a regex that was preventing bare $&#8217;s followed by whitespace
and then valid varname chars from parsing as just $ instead of as a
placeholder (TR)</li>
<li>added some code to break reference cycles after the compilation is
complete. This helps prevent memory leaks when a process in creating then
discarding lots of Templates.  You also need to manually call
&#8220;template.shutdown()&#8221; to clear the remaining reference cycles.
(TR)</li>
<li>fixed string formating bug in the autogenerated docstring code (TR)</li>
<li>added better error message for the #attr directive (TR)</li>
<li>removed some residual code that was causing a bug with cheetahvars that
started with the name of one of the imported modules, such as &#8216;time&#8217;. (TR)</li>
</ul>
</div></blockquote>
<p>0.9.9 (Dec 14, 2001)</p>
<blockquote>
<div><ul>
<li><p class="first">implemented one-line #def&#8217;s and #block&#8217;s (TR):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#def aTest: This is a \$adj test   ---- READ THE MANUAL FOR MORE INFO.</span>
</pre></div>
</div>
<p>NOTE: leading and trailing whitespace is stripped.  These should only be
used on lines by themselves as it reads to the end of the line.</p>
</li>
<li><p class="first">made cheetah-compile accept input on standard input (TR)</p>
</li>
<li><p class="first">made sure that #def and #block work with $&#8217;s on the method names (TR)</p>
</li>
</ul>
</div></blockquote>
<p>0.9.9b1 (Dec 6, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>template constructor arg &#8216;outputFilter&#8217; now &#8216;filter&#8217;, for consistency
with #filter (MO)</li>
<li>template constructor raises TypeError if bad arguments (MO)</li>
<li>Cheetah.Utils.VerifyType new module containing functions for verifying the
type of an argument (MO)</li>
<li>Cheetah.Utils: new package for non-Cheetah-specific modules needed by
Cheetah (MO)</li>
<li>Cheetah.Filters: new filter WebSafe, several bugfixes (MO)</li>
<li>more work on the Users&#8217; Guide (MO)</li>
<li>fixed bug with adding Python&#8217;s __builtins__ to the local vars list (TR)</li>
<li>fixed bug with #echo (TR)</li>
<li>fixed bug that was preventing ${a, $b=1234} from working like ${a, b=1234} (TR)</li>
<li>fixed some bugs in Template.varExists and Template.getVar()
(TR - thanks to MH for spotting them)</li>
<li>made it possible to use filenames like &#8216;spam-eggs.txt&#8217; that have invalid
characters for module names with Template(): Template(file=&#8217;spam-eggs.txt&#8217;)
(TR/MH)</li>
<li>refactored &#8216;cheetah-compile&#8217; a little (TR)</li>
<li>Cheetah.Filters.Strip: new filter to strip leading/trailing whitespace
but preserve newlines.  Suitable for #filter directive or (possible)
future #sed directive. (MO)</li>
<li>Cheetah.Filters.StripSqueeze: new filter to canonicalize all whitespace
chunks to &#8216; &#8216;.  Also removes all newlines (joining multi-line input into
one long line), and leading/trailing whitespace from the final result. (MO)</li>
<li>Filters can now be used standalone for debugging or for use outside
Cheetah.  This works transparently; details are in Filters.py docstring.
(MO)</li>
<li>Cheetah.Tools.MondoReport: new module for dividing a long list into
&#8220;pages&#8221;, and for calculating statistics useful in reports. (MO)</li>
<li>refactored Cheetah.Servlet.Servlet.Awake a little (TR)</li>
<li>fixed an output bug in the #block generated code that turned up when you
tried to override a block method from Python rather than Cheetah. (TR)</li>
<li>started preparing to shift some of the &#8216;shared&#8217; utility classes, such as
SettingsManager, to the Webware core.  Cheetah 1.0 will probably require
Webware to be installed so it can access those shared classes. (TR)</li>
<li>extended the template module command line interface(TR/MO)</li>
</ul>
</div></blockquote>
<p>0.9.9a6 (Nov 6, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>fixed bug with quotations in longer constant string chunks (TR)</li>
<li>fixed another bug in the cheetah-compile script (TR)</li>
<li>fixed a bug in the file-update monitoring code that was resulting in
infinite loops when used with Template sub-classes (TR)</li>
<li>extended the #filter framework according to Mike&#8217;s suggestions (TR)</li>
<li>added test modules for cheetah-compile and the file-update monitoring code (TR)</li>
<li>extended the capabilities of cheetah-compile ... (IB)</li>
<li>updated the docs (MO)</li>
</ul>
</div></blockquote>
<p>0.9.9a5 (October 31, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>fixed a bug I created yesterday (TR)</li>
</ul>
</div></blockquote>
<p>0.9.9a4 (October 30, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>added #repeat (TR implementing Chuck&#8217;s suggestion)</li>
<li>added #unless (TR implementing Mike&#8217;s suggestion)</li>
<li>updates to the Users&#8217; Guide (MO)</li>
<li>fixed a small bug in the cheetah-compile script, as reported by Ian on the
list (TR)</li>
</ul>
</div></blockquote>
<p>0.9.9a3 (October 12, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>more in the Users Guide (TR)</li>
<li>renamed #attribute as #attr  (TR)</li>
<li>renamed #call as #silent (TR)</li>
<li>added #echo directive (TR)</li>
</ul>
</div></blockquote>
<p>0.9.9a2 (October 11, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>updated the example site and the SkeletonPage framework (TR)</li>
<li>fixed some small bugs (TR)</li>
<li>corrected some typos in the docs (TR + MO)</li>
<li>added Ian&#8217;s sitehiearchy class to Cheetah.Tools (TR + IB)</li>
</ul>
</div></blockquote>
<p>0.9.9a1 (October 9, 2001)  [many changes and bug-fixes]</p>
<blockquote>
<div><ul class="simple">
<li>a complete reimplementation of Cheetah&#8217;s core (the parser and compiler
classes) (TR + IB)</li>
<li>implemented the #def, #implements, #import, and #from directives
+ removed #redefine and #macros
+ renamed #extend as #extends (TR + IB)</li>
<li>replaced #data with #settings, see the docs (TR)</li>
<li>restructured and updated the docs (TR + MO + IB)</li>
<li>reimplemented the cheetah-compile script, without the -g option that Ian
had added (TR)</li>
<li>changed the signature of Template.__init__.  See the docs. (TR)</li>
<li>made #set distinguish between local and global vars.  See the docs. (TR)</li>
<li>added hundreds of new test cases (TR)</li>
<li>added the #breakpoint and #compiler-settings directives (TR)</li>
<li>started restructuring the SkeletonPage framework [not complete yet] (TR)</li>
<li>started restructuring the example sites [not complete yet] (TR)</li>
</ul>
</div></blockquote>
<p>0.9.8 (October 9, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>added a few new language constructs (aka &#8216;directives&#8217;) to Cheetah (TR)
#while ... #end while
#try ... #except ... #else ... #finally ... #end try</li>
<li>fixed a bug in the handling of local vars in #for loops that was preventing
callable local vars from being handled properly. See Chuck&#8217;s post of Sept
10. (TR)</li>
<li>fixed a pointer bug in the C version of NameMapper.valueFromSearchList()
that was yielding undefined values for the NotFound exception when it was
raised (TR)</li>
<li>prefaced all internal args to Template() with underscores (TR)</li>
<li>fixed the problem with parsing triple quoted strings in arg lists (TR)</li>
<li>updated the docs (TR)</li>
</ul>
</div></blockquote>
<p>0.9.8a4 (September 7, 2001)</p>
<blockquote>
<div><ul>
<li><p class="first">Added -g (appendGen function argument), which compiles x.tmpl to xGen.py,
with x.py being for non-generated Python code. Also changed option handling
a little and added a comment to the top of compiled files. (IB + MO)</p>
</li>
<li><p class="first">finalized the #include syntax after a lengthy discussion on the list
This is different from in 0.9.8a3 (TR):</p>
<blockquote>
<div><p>#include &lt;ARGS&gt; &lt;EXPR&gt;
... uses the value of EXPR as the path of the file to include.</p>
<p>#include &lt;ARGS&gt; source = &lt;EXPR&gt;
... includes the value of the EXPR</p>
</div></blockquote>
<p>where &lt;ARGS&gt; is &#8216;raw&#8217; or &#8216;&#8217;</p>
</li>
<li><p class="first">re-implemented the output mechanism to use streaming via Webware&#8217;s
Transaction and Response objects when available and fake it with the
DummyTransaction DummyResponse classes when the Webware Transaction is not
avialable. This behaviour is roughly the same as in Webware&#8217;s PSP.  Will
implement output buffering PHP-style later if there is any demand. (TR)</p>
</li>
<li><p class="first">made #include a run-time directive rather than compile-time.  This is
slower, but the semantics are better. (TR)</p>
</li>
<li><p class="first">various small optimizations to the generated code (TR)</p>
</li>
<li><p class="first">updated the docs (TR)</p>
</li>
</ul>
</div></blockquote>
<p>0.9.8a3 (August 22, 2001) [includes changes for 0.9.8a1 and 0.9.8a2]</p>
<blockquote>
<div><ul>
<li><p class="first">Added package ./src/Tools/ for contributed classes/functions/packages not
necessary to run Cheetah.  The first such class is RecursiveNull.py by Ian
Bicking.  Added package Cheetah.Tools to list in ./setup.py . (MO)</p>
</li>
<li><p class="first">Template.__init__ keyword arg &#8216;searchList&#8217;: no longer has to be a tuple.  It
may be a list or any type that that Python&#8217;s &#8216;tuple&#8217; function accepts. (MO)</p>
</li>
<li><p class="first">Template.__init__ new keyword arg &#8216;file&#8217;: this may be a filename or file
object to read the Template Definition from.  If you use this, you must not
pass a Template Definition string also.  New instance variables
._fileName and ._fileMtime are set if a filename was passed; otherwise they
are None. (MO)</p>
</li>
<li><p class="first">CodeGenerator new function &#8216;varNotFound_KeyError&#8217;: raises KeyError if a
placeholder name is missing when filling the template.  Disabled by default.
(MO)  NB - this change has been superceeded by &#8216;errorCheckers&#8217;</p>
</li>
<li><p class="first">Template.getUnknowns (new method): returns a list of Placeholder Names
missing in the Search List. (MO) - this change has been superceeded by
&#8216;errorCheckers&#8217;</p>
</li>
<li><p class="first">made changes to Template.py, CodeGenerator.py, PlaceholderProcessor.py,
and TagProcessor.py to enable customization of the placeholderStartToken so
it can be set to any character sequence, rather than just the default &#8216;$&#8217;.
This is configurable by the Template setting &#8216;placeholderStartToken&#8217; (TR)</p>
</li>
<li><p class="first">fixed a small bug in PlaceholderProcessor.processTag() that prevented
static caching (i.e. $*) of a value containing &#8216;&#8217;&#8217; style quotes</p>
</li>
<li><p class="first">added #break and #continue (TR)</p>
</li>
<li><p class="first">fixed the relative path problem with #include when using Cheetah with WebKit
(TR)</p>
</li>
<li><p class="first">implemented the #stop directive (TR)</p>
</li>
<li><p class="first">fixed a bug in the macro processing that prevented macros defined inside
#includes from being visible at the top level (TR)</p>
</li>
<li><p class="first">fixed a bug in the handling of the setting &#8216;useAutocalling&#8217; (TR)</p>
</li>
<li><p class="first">fixed some bugs in the handling of macros (TR)</p>
</li>
<li><p class="first">completed the transition to nested template #includes (TR)</p>
</li>
<li><p class="first">added direct #includes (TR)</p>
</li>
<li><p class="first">completed the transition to run-time evaluation (TR)</p>
</li>
<li><p class="first">renamed the .startServer() method of Template to .compile() (TR)</p>
</li>
<li><p class="first">renamed the &#8216;delayedStart&#8217; setting as &#8216;delayedCompile&#8217; (TR)</p>
</li>
<li><p class="first">added .redefineTemplateBlock as an alias to Template.defineTemplateBlock
(TR)</p>
</li>
<li><p class="first">got relative path includes working with Webware and Cheetah.Servlet (TR)</p>
</li>
<li><p class="first">lots of changes in the docs (TR &amp; MO)</p>
</li>
<li><p class="first">implemented a C version of NameMapper (TR + CE)</p>
</li>
<li><p class="first">added the &#8216;errorCheckers&#8217; framwork (TR)</p>
</li>
<li><p class="first">added the &#8216;formatters&#8217; framework and the #formatter directive</p>
</li>
<li><p class="first">a major restructuring of the modules and internal API (TR)</p>
</li>
<li><p class="first">made sure that all the #directives with start and end tags are
implemented in such a way that they won&#8217;t cause &#8216;maximum recursion&#8217; limit
errors if their content block is long.  Simple regexes didn&#8217;t cut it in these
cases. (TR)</p>
<ul class="simple">
<li>#macro</li>
<li>multiline comments</li>
<li>#data</li>
<li>#block</li>
<li>#raw</li>
<li>the parsing of the core tags (the state-dependent ones) after they have been
translated to the internal delimiters</li>
</ul>
</li>
<li><p class="first">made a Template.shutdown() method for cleaning up reference cycles before a
template object is deleted. (TR)</p>
</li>
<li><p class="first">made the parsing and processing of #macros() more robust (TR)</p>
</li>
<li><p class="first">implemented the file update checking mechanism (TR)
NOTE, the syntax for the #include is now:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#include &lt;ARGS&gt; file = &lt;EXPR&gt;</span>
<span class="o">...</span> <span class="n">uses</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">EXPR</span> <span class="k">as</span> <span class="n">the</span> <span class="n">path</span> <span class="n">of</span> <span class="n">the</span> <span class="n">file</span> <span class="n">to</span> <span class="n">include</span><span class="o">.</span>

<span class="c1">#include &lt;ARGS&gt; &lt;EXPR&gt;</span>
<span class="o">...</span> <span class="n">includes</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">the</span> <span class="n">EXPR</span>
</pre></div>
</div>
<p>where &lt;ARGS&gt; is &#8216;raw&#8217; or &#8216;direct&#8217;</p>
</li>
</ul>
</div></blockquote>
<p>0.9.7 (July 13, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>reimplemented the parsing of $placeholders using the Python tokenize module (TR)<ul>
<li>now translates into Python code instead of going through NameMapper for
each request</li>
<li>supports arg lists and nested placeholders</li>
<li>maintained support for autocalling of functions and methods,
will do this serially for $func.otherFunc, etc.</li>
</ul>
</li>
<li>reimplemented the #include and #raw directives using nested templates for
parsed includes and  string attributes of &#8216;Template&#8217; to store raw text
The support for file update monitoring of includes is still not implemented (TR)</li>
<li>moved some stuff from __init__.py into CHANGES and TODO  (TR)</li>
<li>added a new command &#8216;sdist_docs&#8217; to setup.py which rebuilds the docs
when making a source distribution (TR)</li>
<li>changed the name of the ./Cheetah dir to ./src (TR)</li>
<li>fixed a bug in one of the code filters that was preventing commas from
being used between $placeholders (TR)</li>
<li>generalized the line ending regex for single-line comments (TR)</li>
<li>corrected the spelling of &#8216;Delimiters&#8217; throughout Cheetah (TR)</li>
<li>made insertLines in Utilities.py more robust (Chuck)</li>
<li>added key argument to raising some NotFound exceptions in NameMapper (Chuck)</li>
<li>fixed strange bug involving missing templateObj parameter
in PlaceholderProcessor.py(Chuck)</li>
<li>expanded on the docs (Mike)</li>
</ul>
</div></blockquote>
<p>0.9.6 (June 12, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>fixed a bug in NameMapper that was preventing &#8216;obj.__class__.__name__&#8217; from mapping (TR)</li>
</ul>
</div></blockquote>
<p>0.9.5 (June 10, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>implemented the #cache directive - see the mailing list (TR)</li>
<li>reworked the handling of cached $placeholders and set $var to mean NO_CACHE,
$*var to mean STATIC_CACHE, and $*15*var to mean TIMED_REFRESH_CACHE (TR)</li>
<li>renamed Template._getValueForName as Template.mapName (TR)</li>
</ul>
</div></blockquote>
<p>0.9.4 (June 9, 2001)</p>
<blockquote>
<div><ul class="simple">
<li>created a SettingsManager base class to handle settings for the Template class (TR)</li>
<li>moved the HTML docs icons into the same dir as the HTML (TR)</li>
</ul>
</div></blockquote>
<p>0.9.3</p>
<blockquote>
<div><ul class="simple">
<li>updated the User&#8217;s Guide Makefile. Builds HTML, PDF, and PS in the ./docs dir now. (TR)</li>
<li>changed the refs to &#8216;Tavis Rudd&#8217; in the docs to &#8216;The Cheetah Development Team&#8217; (TR)</li>
<li>added a few bits to the docs (TR)</li>
<li>did some internal renaming so &#8216;nameMapperTags&#8217; are referred as &#8216;placeholderTags&#8217; (TR)</li>
<li>added the #slurp directive (TR)</li>
</ul>
</div></blockquote>
<p>0.9.2</p>
<blockquote>
<div><ul class="simple">
<li>got the PSP plugin working again.  It still need test cases. (TR)</li>
</ul>
</div></blockquote>
<p>0.9.1</p>
<blockquote>
<div><ul class="simple">
<li>Changed the name of the package to &#8216;Cheetah&#8217; from TemplateServer (TR)</li>
<li>Changed the name of the Server module and its TemplateServer class to &#8216;Template&#8217; (TR)</li>
<li>Changed the name of the &#8216;TScompile&#8217; script to &#8216;cheetah-compile&#8217; (TR)</li>
<li>updated the docs (TR)</li>
</ul>
</div></blockquote>
<p>0.9.0</p>
<blockquote>
<div><ul class="simple">
<li>changed the names and behaviour of the #parse and #include directives (TR)
see the docs for more. (TR)</li>
<li>changed #verbatim to #raw (TR)</li>
<li>fixed a bug in Tests.py that caused an error on the first run. (TR)</li>
<li>more docs (TR + MO)</li>
<li>! all tests pass with Python 2.1 and 2.0 (TR)</li>
</ul>
</div></blockquote>
<p>0.8.4</p>
<blockquote>
<div><ul class="simple">
<li>changed the #directive end tags to #end if instead of #/if and #end (TR)
macro instead of #/macro (TR)</li>
<li>more work on the User&#8217;s Guide (TR)</li>
<li>fixed a bug in TScompile (TR)</li>
</ul>
</div></blockquote>
<p>0.8.3</p>
<blockquote>
<div><ul class="simple">
<li>fixed a problem with the regexs that caused $vars and #directives at the (TR)
very beginning of the template string not to match in Python 2.0 (TR)</li>
<li>removed some Test cases that made invalid assumptions about the order (TR)
of items in dictionaries. (TR)</li>
</ul>
</div></blockquote>
<p>0.8.2</p>
<blockquote>
<div><ul class="simple">
<li>finished half of the User&#8217;s Guide (TR)</li>
<li>fixed several small bugs (TR)</li>
<li>added the #comment directive and removed the old &lt;# multiline comment tag #&gt; (TR)</li>
<li>changed the explicit directive closure to /# from ;# (TR)</li>
</ul>
</div></blockquote>
<p>0.7.6</p>
<blockquote>
<div><ul class="simple">
<li>several small bug fixes (TR)</li>
<li>reimplemented the #block directive to avoid maximum recursion depth errors (TR)
with large blocks. (TR)</li>
<li>created many new test cases in the regression testing suite (TR)</li>
<li>added an example site to the examples/ directory (TR)</li>
<li>started the User&#8217;s Guide (TR)</li>
</ul>
</div></blockquote>
<p>0.7.5</p>
<blockquote>
<div><ul class="simple">
<li>implemented the command-line compiler (TR)</li>
</ul>
</div></blockquote>
<p>0.7.3-4</p>
<blockquote>
<div><ul class="simple">
<li>implemented the regression testing suite (TR)</li>
<li>fixed a number of small bugs (TR)</li>
</ul>
</div></blockquote>
<p>0.7.2</p>
<blockquote>
<div><ul class="simple">
<li>implemented the #longMacro directive (TR)</li>
</ul>
</div></blockquote>
<p>KEY TO INITIALS USED ABOVE:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">TR</span> <span class="o">-</span> <span class="n">Tavis</span> <span class="n">Rudd</span>
<span class="n">MO</span> <span class="o">-</span> <span class="n">Mike</span> <span class="n">Orr</span>
<span class="n">JJ</span> <span class="o">-</span> <span class="n">Shannon</span> <span class="s1">&#39;jj&#39;</span> <span class="n">Behrens</span>
<span class="n">IB</span> <span class="o">-</span> <span class="n">Ian</span> <span class="n">Bicking</span>
<span class="n">CE</span> <span class="o">-</span> <span class="n">Chuck</span> <span class="n">Esterbrook</span>
<span class="n">MH</span> <span class="o">-</span> <span class="n">Mike</span> <span class="n">Halle</span>
</pre></div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cheetah3 - The Python-Powered Template Engine</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Oleg Broytman; 2009-2012, R. Tyler Croy; 2001-2008, The Cheetah Development Team..
      Last updated on Apr 22, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.5.
    </div>
  </body>
</html>